/* ==========================================================================
   Letter Popup Modal
   ========================================================================== */

.modal-hidden {
    display: none !important;
}

#letter-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(40, 30, 20, 0.7); /* Thematic overlay */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 3000; /* Higher than settings panel */
    opacity: 0;
    transition: opacity 0.3s ease;
}

#letter-modal-overlay.visible {
    opacity: 1;
}

#letter-modal-container {
    background-color: var(--bg-card);
    color: var(--text-main);
    padding: 3em; /* Increased padding for more breathing room */
    border-radius: 15px;
    border: 2px solid var(--accent-gold-dark);
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    position: relative;
    text-align: center;
    transform: scale(0.9);
    transition: transform 0.3s ease;    
    display: flex;
    justify-content: center;
    align-items: center;
    max-width: 90vw; /* Prevent it from being too wide on large screens */
}

/* Override default shadows with a glow for the glass theme */
.glass-theme #letter-modal-container {
    box-shadow: 0 4px 15px var(--shadow-card);
}

#letter-modal-overlay.visible #letter-modal-container {
    transform: scale(1);
}

#letter-modal-body {
    font-family: var(--font-arabic);
    font-weight: 700;
    line-height: 1;
    color: var(--text-header);
}

/* Default view for combined letter "equations" */
#letter-modal-body:not(.single-letter-view) {
    font-size: 8rem; /* Reverted size */
    padding: 0.5em 1.5em; /* Adjust padding to make the box a bit smaller */
}

/* Flex container for the new single-letter view */
.single-letter-view {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 3.5em; /* Reverted gap */
    padding: 0 1em; /* Add side padding */
}

/* Container for the large letter and its name */
.single-letter-view .letter-header {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center; /* Center the main letter */
    position: relative;      /* Establish a positioning context for the names */
    width: 100%;             /* Ensure the header spans the full width */
}

/* Container for the multi-language letter names */
.single-letter-view .letter-names-group {
    position: absolute;      /* Take names out of the layout flow */
    right: 0;                /* Position on the far right */
    top: 50%;                /* Vertically center */
    transform: translateY(-50%); /* Fine-tune vertical centering */
    text-align: right;
}

/* Style for each individual name */
.single-letter-view .letter-name-item {
    font-size: 1.5rem;
    font-weight: 400;
    color: var(--text-main);
    opacity: 0.8; /* Make it even more subtle */
    line-height: 1.4;
}

/* Specific font families */
.single-letter-view .arabic-name {
    font-family: var(--font-arabic);
    font-size: 1.8rem; /* Arabic can be a bit larger */
}
.single-letter-view .bengali-name {
    font-family: var(--font-bengali);
}
.single-letter-view .english-name {
    font-family: var(--font-ui);
}

/* The large, standalone letter at the top */
.single-letter-view .single-letter-display {
    font-size: 10rem; /* Reverted size */
    line-height: 1;
}

/* Container for all examples */
.single-letter-view .examples-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1em;
}

/* Flex container for the combination examples */
.single-letter-view .combination-examples {
    display: flex;
    gap: 1em;
    justify-content: center;
    align-items: center;
    direction: rtl; /* Ensure examples are laid out right-to-left */
}

/* Individual combination example cards */
.single-letter-view .example {
    font-size: 5rem; /* Reverted size */
    padding: 0.2em 0.4em;
    background-color: var(--bg-arabic-card);
    border: 1px solid var(--accent-gold-dark);
    border-radius: 8px;
}

/* Container for the positional form and makhraj number */
.single-letter-view .positional-form-container {
    display: flex;
    align-items: stretch; /* Make children equal height */
    justify-content: center;
    gap: 1em; /* Match the gap of the row above */
    width: 100%;
}

/* The example showing initial, medial, final forms */
.single-letter-view .positional-form-example {
    font-size: 5rem; /* Reverted size */
    padding: 0.2em 0.6em;
    background-color: var(--bg-arabic-card);
    border: 1px solid var(--accent-gold-dark);
    border-radius: 8px;
}

/* New box for the makhraj number */
.single-letter-view .makhraj-box {
    font-family: var(--font-bengali);
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--text-header);
    background-color: var(--bg-arabic-card);
    border: 1px solid var(--accent-gold-dark);
    border-radius: 8px;
    /* Center its content and add padding */
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0 1em; /* Add horizontal padding for breathing room */
}